import React, { useState } from 'react';
import { ChevronLeft, TrendingUp, Star, Award, Calendar, BarChart3, PieChart, Target, Gift, Zap } from 'lucide-react';

export default function MonthlyCharacterAnalysis() {
  const [selectedCharacter, setSelectedCharacter] = useState('joy');

  // ì´ë²ˆ ë‹¬ ìºë¦­í„° ë°ì´í„° (ì¼ë°˜ ì¼ê¸° + ê°œì¸í˜• íƒ€ì„ìº¡ìŠ í†µí•©)
  const monthlyData = {
    month: '2025ë…„ 7ì›”',
    totalDays: 6, // í˜„ì¬ê¹Œì§€
    recordedDays: 5,
    totalRecords: 12, // ì¼ë°˜ 7íšŒ + íƒ€ì„ìº¡ìŠ 5íšŒ
    generalDiary: 7,
    capsuleDiary: 5,
    totalPoints: 420
  };

  // ìºë¦­í„° ì„±ì¥ ë°ì´í„°
  const characters = [
    { 
      id: 'joy', 
      emoji: 'ğŸ˜Š', 
      name: 'ê¸°ì¨ì´', 
      color: '#FFD700',
      level: 8,
      exp: 850,
      maxExp: 1000,
      growth: '+2ë ˆë²¨',
      usage: 45,
      percentage: 42,
      description: 'ì´ë²ˆ ë‹¬ ê°€ì¥ í™œë°œí–ˆë˜ ì¹œêµ¬!',
      insights: ['ì›”ê¸‰ë‚ ê³¼ ë³´ë„ˆìŠ¤ë¡œ ì¸í•œ ê¸ì • ì—ë„ˆì§€', 'ëª©í‘œ ë‹¬ì„± ê³¼ì •ì—ì„œ ì„±ì·¨ê° ì¦ê°€', 'ì ˆì•½ ì„±ê³µì‹œ ë¿Œë“¯í•¨ í‘œí˜„'],
      financialPattern: 'ìˆ˜ì… ì¦ê°€ë‚˜ ëª©í‘œ ë‹¬ì„±ì‹œ ë”ìš± í™œë°œí•´ì ¸ìš”'
    },
    { 
      id: 'fear', 
      emoji: 'ğŸ˜°', 
      name: 'ë¶ˆì•ˆì´', 
      color: '#9B59B6',
      level: 6,
      exp: 420,
      maxExp: 700,
      growth: '+1ë ˆë²¨',
      usage: 18,
      percentage: 25,
      description: 'ì‹ ì¤‘í•œ ê³„íšìœ¼ë¡œ ë„ì™€ì¤¬ì–´ìš”',
      insights: ['í° ì§€ì¶œ ì „ ì‹ ì¤‘í•œ ê²€í† ', 'íˆ¬ì ê²°ì •ì‹œ ë¦¬ìŠ¤í¬ ë¶„ì„', 'ì˜ˆì‚° ì´ˆê³¼ ìš°ë ¤ì‹œ ë“±ì¥'],
      financialPattern: 'ì¤‘ìš”í•œ ê¸ˆìœµ ê²°ì •ì‹œ ê· í˜•ì¡íŒ ì¡°ì–¸ ì œê³µ'
    },
    { 
      id: 'sadness', 
      emoji: 'ğŸ˜¢', 
      name: 'ìŠ¬í””ì´', 
      color: '#4A90E2',
      level: 4,
      exp: 180,
      maxExp: 500,
      growth: '+0ë ˆë²¨',
      usage: 8,
      percentage: 15,
      description: 'ì–´ë ¤ìš´ ìˆœê°„ì„ í•¨ê»˜í–ˆì–´ìš”',
      insights: ['ì˜ˆìƒì¹˜ ëª»í•œ ì§€ì¶œë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤', 'ëª©í‘œ ì§€ì—°ì‹œ ì‹¤ë§ê° í‘œí˜„', 'ê²½ì œì  ë¶€ë‹´ ìƒí™©ì—ì„œ ìœ„ë¡œ'],
      financialPattern: 'í˜„ì‹¤ì ì¸ ì¡°ì–¸ê³¼ ìœ„ë¡œë¥¼ ë™ì‹œì— ì œê³µ'
    },
    { 
      id: 'anger', 
      emoji: 'ğŸ˜¡', 
      name: 'ë¶„ë…¸', 
      color: '#FF4444',
      level: 3,
      exp: 90,
      maxExp: 400,
      growth: '+0ë ˆë²¨',
      usage: 6,
      percentage: 10,
      description: 'ë¶ˆí•©ë¦¬í•¨ì— ë§ì„œ ì‹¸ì› ì–´ìš”',
      insights: ['ê³¼ë„í•œ ìˆ˜ìˆ˜ë£Œì— ëŒ€í•œ ë¶„ë…¸', 'ë¶ˆí•„ìš”í•œ ì§€ì¶œ í›„ ìì±…', 'ê°€ê²© ë¹„êµ í›„ ë¶„í•œ ê°ì •'],
      financialPattern: 'ì •ì˜ë¡œìš´ ì†Œë¹„ ê²°ì •ì„ ë„ì™€ì¤˜ìš”'
    },
    { 
      id: 'disgust', 
      emoji: 'ğŸ¤¢', 
      name: 'ê¹Œì¹ ì´', 
      color: '#2ECC71',
      level: 3,
      exp: 110,
      maxExp: 400,
      growth: '+0ë ˆë²¨',
      usage: 5,
      percentage: 8,
      description: 'ì™„ë²½ì„ ì¶”êµ¬í–ˆì–´ìš”',
      insights: ['ê°€ì„±ë¹„ ë‚˜ìœ êµ¬ë§¤ì— ëŒ€í•œ í›„íšŒ', 'í’ˆì§ˆ ëŒ€ë¹„ ë¹„ì‹¼ ê°€ê²© ë¶ˆë§Œ', 'ë” ë‚˜ì€ ëŒ€ì•ˆ íƒìƒ‰'],
      financialPattern: 'í’ˆì§ˆê³¼ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì†Œë¹„ íŒ¨í„´'
    }
  ];

  // ì›”ê°„ í•˜ì´ë¼ì´íŠ¸
  const monthlyHighlights = [
    { date: '7.01', title: 'ì›”ê¸‰ ì…ê¸ˆ', emotion: 'ğŸ˜Š', impact: 'ê¸°ì¨ì´ +50EXP', type: 'income' },
    { date: '7.03', title: 'íˆ¬ì ì‹ ì¤‘ ê²€í† ', emotion: 'ğŸ˜°', impact: 'ë¶ˆì•ˆì´ +30EXP', type: 'decision' },
    { date: '7.05', title: 'ëª©í‘œ ë‹¬ì„±!', emotion: 'ğŸ˜Š', impact: 'ê¸°ì¨ì´ +40EXP', type: 'achievement' },
    { date: '7.06', title: 'ìˆ˜ìˆ˜ë£Œ ì•„ê¹Œì›€', emotion: 'ğŸ˜¡', impact: 'ë¶„ë…¸ +20EXP', type: 'expense' }
  ];

  // ê¸ˆìœµ íŒ¨í„´ ë¶„ì„
  const financialPatterns = [
    { 
      type: 'ìˆ˜ì…ì‹œ íŒ¨í„´', 
      character: 'ğŸ˜Š', 
      description: 'ê¸°ì¨ì´ê°€ 90% ë“±ì¥', 
      insight: 'ìˆ˜ì… ì¦ê°€ì‹œ ì ê·¹ì ì¸ ì €ì¶• ê³„íš ìˆ˜ë¦½' 
    },
    { 
      type: 'ì§€ì¶œì‹œ íŒ¨í„´', 
      character: 'ğŸ˜°', 
      description: 'ë¶ˆì•ˆì´ê°€ 60% ë“±ì¥', 
      insight: 'ì‹ ì¤‘í•œ ê²€í†  í›„ í•©ë¦¬ì  ì†Œë¹„ ê²°ì •' 
    },
    { 
      type: 'ëª©í‘œ ë‹¬ì„±ì‹œ', 
      character: 'ğŸ˜Š', 
      description: 'ê¸°ì¨ì´ê°€ 100% ë“±ì¥', 
      insight: 'ì„±ì·¨ê°ìœ¼ë¡œ ë‹¤ìŒ ëª©í‘œ ì„¤ì • ë™ê¸° ë¶€ì—¬' 
    }
  ];

  const selectedCharacterData = characters.find(char => char.id === selectedCharacter);

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 max-w-md mx-auto">
      {/* í—¤ë” */}
      <div className="bg-white shadow-sm">
        <div className="flex items-center justify-between p-4">
          <button className="p-2 rounded-full hover:bg-gray-100">
            <ChevronLeft className="w-6 h-6 text-gray-600" />
          </button>
          <div className="text-center">
            <div className="text-lg font-bold text-gray-800">ì›”ê°„ ìºë¦­í„° ë¶„ì„</div>
            <div className="text-xs text-gray-500">{monthlyData.month}</div>
          </div>
          <button className="p-2 rounded-full hover:bg-gray-100">
            <BarChart3 className="w-6 h-6 text-gray-600" />
          </button>
        </div>
      </div>

      <div className="p-4 space-y-6">
        {/* ì›”ê°„ ìš”ì•½ */}
        <div className="bg-gradient-to-r from-purple-500 to-blue-600 rounded-xl p-5 text-white">
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-xl font-bold">{monthlyData.month} ìš”ì•½</h2>
            <div className="bg-white/20 px-3 py-1 rounded-full">
              <span className="text-sm font-medium">{monthlyData.recordedDays}/{monthlyData.totalDays}ì¼ ê¸°ë¡</span>
            </div>
          </div>
          
          <div className="grid grid-cols-2 gap-4">
            <div className="bg-white/20 rounded-lg p-3">
              <div className="text-2xl font-bold">{monthlyData.totalRecords}íšŒ</div>
              <div className="text-white/80 text-sm">ì´ ê¸°ë¡</div>
              <div className="text-xs text-white/60 mt-1">
                ì¼ë°˜ {monthlyData.generalDiary}íšŒ â€¢ ìº¡ìŠ {monthlyData.capsuleDiary}íšŒ
              </div>
            </div>
            <div className="bg-white/20 rounded-lg p-3">
              <div className="text-2xl font-bold">{monthlyData.totalPoints}P</div>
              <div className="text-white/80 text-sm">íšë“ í¬ì¸íŠ¸</div>
              <div className="text-xs text-white/60 mt-1">
                í‰ê·  {Math.round(monthlyData.totalPoints / monthlyData.totalRecords)}P/íšŒ
              </div>
            </div>
          </div>
        </div>

        {/* ìºë¦­í„° ì„±ì¥ ìˆœìœ„ */}
        <div className="bg-white rounded-xl p-5 shadow-sm">
          <h3 className="text-lg font-bold text-gray-800 mb-4">ğŸ† ì´ë²ˆ ë‹¬ ìºë¦­í„° ì„±ì¥</h3>
          <div className="space-y-3">
            {characters.map((character, index) => (
              <button
                key={character.id}
                onClick={() => setSelectedCharacter(character.id)}
                className={`w-full p-3 rounded-xl transition-all ${
                  selectedCharacter === character.id 
                    ? 'shadow-lg transform scale-102' 
                    : 'bg-gray-50 hover:bg-gray-100'
                }`}
                style={{
                  backgroundColor: selectedCharacter === character.id ? `${character.color}15` : undefined,
                  borderColor: selectedCharacter === character.id ? character.color : undefined,
                  borderWidth: selectedCharacter === character.id ? '2px' : '1px'
                }}
              >
                <div className="flex items-center justify-between">
                  <div className="flex items-center space-x-3">
                    <div className="relative">
                      <span className="text-2xl">{character.emoji}</span>
                      {character.growth !== '+0ë ˆë²¨' && (
                        <div className="absolute -top-1 -right-1 bg-yellow-400 rounded-full w-4 h-4 flex items-center justify-center">
                          <Zap className="w-2 h-2 text-white" />
                        </div>
                      )}
                    </div>
                    <div className="text-left">
                      <div className="font-semibold text-gray-800">{character.name}</div>
                      <div className="text-xs text-gray-500">Lv.{character.level} â€¢ {character.usage}íšŒ ë“±ì¥</div>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="font-bold" style={{ color: character.color }}>
                      {character.percentage}%
                    </div>
                    <div className="text-xs text-green-600">{character.growth}</div>
                  </div>
                </div>
              </button>
            ))}
          </div>
        </div>

        {/* ì„ íƒëœ ìºë¦­í„° ìƒì„¸ */}
        {selectedCharacterData && (
          <div className="bg-white rounded-xl p-5 shadow-sm">
            <div className="flex items-center space-x-3 mb-4">
              <span className="text-3xl">{selectedCharacterData.emoji}</span>
              <div>
                <h3 className="text-lg font-bold text-gray-800">
                  {selectedCharacterData.name} ìƒì„¸ ë¶„ì„
                </h3>
                <p className="text-sm text-gray-600">{selectedCharacterData.description}</p>
              </div>
            </div>

            {/* ë ˆë²¨ ì§„í–‰ë¥  */}
            <div className="mb-4">
              <div className="flex justify-between items-center mb-2">
                <span className="text-sm font-medium text-gray-700">ì„±ì¥ ê²½í—˜ì¹˜</span>
                <span className="text-sm text-gray-600">
                  {selectedCharacterData.exp}/{selectedCharacterData.maxExp}
                </span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-3">
                <div 
                  className="h-3 rounded-full transition-all duration-500"
                  style={{ 
                    width: `${(selectedCharacterData.exp / selectedCharacterData.maxExp) * 100}%`,
                    backgroundColor: selectedCharacterData.color
                  }}
                ></div>
              </div>
            </div>

            {/* ê¸ˆìœµ íŒ¨í„´ */}
            <div className="mb-4">
              <h4 className="font-semibold text-gray-800 mb-2">ğŸ’¡ ê¸ˆìœµ íŒ¨í„´</h4>
              <p className="text-sm text-gray-600 mb-3">{selectedCharacterData.financialPattern}</p>
              
              <div className="space-y-2">
                {selectedCharacterData.insights.map((insight, index) => (
                  <div key={index} className="flex items-start space-x-2">
                    <div className="w-1.5 h-1.5 rounded-full mt-2" 
                         style={{ backgroundColor: selectedCharacterData.color }}></div>
                    <span className="text-xs text-gray-600">{insight}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* ì›”ê°„ í•˜ì´ë¼ì´íŠ¸ */}
        <div className="bg-white rounded-xl p-5 shadow-sm">
          <h3 className="text-lg font-bold text-gray-800 mb-4">âœ¨ ì´ë²ˆ ë‹¬ í•˜ì´ë¼ì´íŠ¸</h3>
          <div className="space-y-3">
            {monthlyHighlights.map((highlight, index) => (
              <div key={index} className="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                  <span className="text-sm font-bold text-blue-600">{highlight.date}</span>
                </div>
                <div className="flex-1">
                  <div className="font-medium text-gray-800">{highlight.title}</div>
                  <div className="text-xs text-gray-500">{highlight.impact}</div>
                </div>
                <span className="text-xl">{highlight.emotion}</span>
              </div>
            ))}
          </div>
        </div>

        {/* ê¸ˆìœµ íŒ¨í„´ ë¶„ì„ */}
        <div className="bg-white rounded-xl p-5 shadow-sm">
          <h3 className="text-lg font-bold text-gray-800 mb-4">ğŸ” ê¸ˆìœµ íŒ¨í„´ ë°œê²¬</h3>
          <div className="space-y-3">
            {financialPatterns.map((pattern, index) => (
              <div key={index} className="p-3 bg-gray-50 rounded-lg">
                <div className="flex items-center space-x-2 mb-2">
                  <span className="text-lg">{pattern.character}</span>
                  <span className="font-semibold text-gray-800">{pattern.type}</span>
                </div>
                <div className="text-sm text-gray-600 mb-1">{pattern.description}</div>
                <div className="text-xs text-green-600">ğŸ’¡ {pattern.insight}</div>
              </div>
            ))}
          </div>
        </div>

        {/* AI ë§ì¶¤ ì œì•ˆ */}
        <div className="bg-gradient-to-r from-green-100 to-blue-100 rounded-xl p-5">
          <div className="flex items-center space-x-3 mb-3">
            <div className="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
              <span className="text-white text-lg">ğŸ¤–</span>
            </div>
            <h3 className="text-lg font-bold text-gray-800">AI ë§ì¶¤ ì œì•ˆ</h3>
          </div>
          
          <div className="bg-white/60 rounded-lg p-4 mb-3">
            <div className="font-medium text-gray-800 mb-2">ğŸ˜Š ê¸°ì¨ì´ ì¶”ì²œ ìƒí’ˆ</div>
            <div className="text-sm text-gray-600 mb-2">
              ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë†’ì€ ë‹¹ì‹ ì—ê²Œ ì ê·¹ì  íˆ¬ììƒí’ˆì„ ì¶”ì²œí•´ìš”!
            </div>
            <button className="text-xs bg-blue-500 text-white px-3 py-1 rounded-full">
              NHì ê·¹íˆ¬ìí€ë“œ ë³´ê¸°
            </button>
          </div>

          <div className="bg-white/60 rounded-lg p-4">
            <div className="font-medium text-gray-800 mb-2">ğŸ˜° ë¶ˆì•ˆì´ ì¶”ì²œ ìƒí’ˆ</div>
            <div className="text-sm text-gray-600 mb-2">
              ì‹ ì¤‘í•œ ì„±í–¥ì„ ê³ ë ¤í•´ ì•ˆì „í•œ ì €ì¶•ìƒí’ˆë„ í•¨ê»˜ ê³ ë ¤í•´ë³´ì„¸ìš”!
            </div>
            <button className="text-xs bg-purple-500 text-white px-3 py-1 rounded-full">
              NHì•ˆì „ì ê¸ˆ ë³´ê¸°
            </button>
          </div>
        </div>

        {/* ë‹¤ìŒ ë‹¬ ëª©í‘œ */}
        <div className="bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-5">
          <div className="flex items-center space-x-3 mb-3">
            <Target className="w-6 h-6 text-orange-600" />
            <h3 className="text-lg font-bold text-gray-800">ğŸ¯ ë‹¤ìŒ ë‹¬ ìºë¦­í„° ì„±ì¥ ëª©í‘œ</h3>
          </div>
          
          <div className="grid grid-cols-2 gap-3">
            <div className="bg-white/60 rounded-lg p-3 text-center">
              <span className="text-2xl">ğŸ˜Š</span>
              <div className="font-medium text-gray-800 mt-2">ê¸°ì¨ì´ Lv.10</div>
              <div className="text-xs text-gray-600">ë ˆë²¨ì—…ê¹Œì§€ 150EXP</div>
            </div>
            <div className="bg-white/60 rounded-lg p-3 text-center">
              <span className="text-2xl">ğŸ˜°</span>
              <div className="font-medium text-gray-800 mt-2">ë¶ˆì•ˆì´ Lv.7</div>
              <div className="text-xs text-gray-600">ê· í˜•ì¡íŒ ì„±ì¥</div>
            </div>
          </div>
          
          <button className="w-full mt-4 bg-orange-500 text-white py-3 rounded-lg font-semibold">
            8ì›” ëª©í‘œ ì„¤ì •í•˜ê¸°
          </button>
        </div>
      </div>

      {/* í•˜ë‹¨ ì—¬ë°± */}
      <div className="h-4"></div>
    </div>
  );
}